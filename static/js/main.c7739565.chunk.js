(this["webpackJsonpreact-polluted-cities-app"]=this["webpackJsonpreact-polluted-cities-app"]||[]).push([[0],{27:function(e,n,t){e.exports=t(51)},51:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),o=t(22),i=t.n(o),c=(t(32),t(1)),l=t(2);function u(){var e=Object(c.a)(['\n  *, *::before, *::after {\n    box-sizing: border-box;\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n  }\n\n  body {\n    font-family: -apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";\n  }\n\n  .sr-only {\n    position: absolute;\n    width: 1px;\n    height: 1px;\n    padding: 0;\n    overflow: hidden;\n    clip: rect(0, 0, 0, 0);\n    white-space: nowrap;\n    border: 0;\n  }\n']);return u=function(){return e},e}var s=Object(l.a)(u());function d(){var e=Object(c.a)(["\n  margin: 0 auto;\n  padding: 0 30px;\n  text-align: center;\n\n  @media (min-width: 576px) {\n    max-width: 600px;\n  }\n"]);return d=function(){return e},e}var m=l.b.main(d()),p=function(e){var n=e.children;return a.a.createElement(m,null,a.a.createElement("h1",null,"The most polluted cities"),a.a.createElement("p",null,"Check 10 the most polluted cities in Poland, Germany, Spain or France."),a.a.createElement(s,null),n)},f=t(10),b=t.n(f),v=t(26),g=t(6),h=t(5),y=t(8),x=t.n(y),E=["Poland","Germany","Spain","France"],j=["PL","DE","ES","FR"],O=function(e){return Object.keys(e).map((function(n){return"".concat(n,"=").concat(e[n])})).join("&")},w={limit:500,order_by:"value",sort:"desc",parameter:"pm25",date_from:function(e){var n=e.getUTCFullYear(),t="0".concat(e.getUTCMonth()+1).slice(-2),r="0".concat(e.getUTCDate()).slice(-2);return"".concat(n,"-").concat(t,"-").concat(r)}(new Date)},k=function(e){var n=Object(h.a)(Object(h.a)({},w),{},{country:e}),t=O(n);return x()("".concat("https://api.openaq.org/v1").concat("/measurements","?").concat(t))},S={action:"query",format:"json",explaintext:"",redirects:1,prop:"extracts",exintro:"",exsentences:2},C=function(e){var n=Object(h.a)(Object(h.a)({},S),{},{titles:e}),t=O(n);return x()("".concat("https://en.wikipedia.org/w/api.php?origin=*","&").concat(t))},P=a.a.createContext(),F=t(4),L=function(e){var n=e.country;return a.a.createElement("option",{value:n})},I=function(e){var n=e.countries,t=Object(F.a)(e,["countries"]);return a.a.createElement("datalist",t,n.map((function(e){return a.a.createElement(L,{key:e,country:e})})))};I.defaultProps={countries:[]};var N=I;function U(){var e=Object(c.a)(["\n  display: inline-block;\n  font-weight: 400;\n  color: #fff;\n  text-align: center;\n  vertical-align: middle;\n  user-select: none;\n  background-color: #007bff;\n  border: 1px solid #007bff;\n  padding: 0.375rem 0.75rem;\n  font-size: 1rem;\n  line-height: 1.5;\n  border-radius: 0.25rem;\n  transition: color 0.15s;\n\n  &:disabled {\n    opacity: 0.65;\n  }\n\n  &:hover {\n    cursor: pointer;\n  }\n"]);return U=function(){return e},e}var q=l.b.button(U()),z=function(e){var n=e.type,t=Object(F.a)(e,["type"]);return a.a.createElement(q,Object.assign({type:n},t))};z.defaultProps={type:"button"};var D=z;function T(){var e=Object(c.a)(["\n  width: 100%;\n  display: inline-block;\n"]);return T=function(){return e},e}var M=l.b.label(T()),R=function(e){var n=e.children,t=e.labelName,r=e.srOnly;return a.a.createElement(M,null,r?a.a.createElement("span",{className:"sr-only"},t):a.a.createElement(a.a.Fragment,null,t),n)};R.defaultProps={srOnly:!1};var A=R;function B(){var e=Object(c.a)(["\n  display: block;\n  width: 100%;\n  height: calc(1.5em + 0.75rem + 2px);\n  padding: 0.375rem 0.75rem;\n  font-size: 1rem;\n  font-weight: 400;\n  line-height: 1.5;\n  color: #495057;\n  background-color: #fff;\n  background-clip: padding-box;\n  border: 1px solid #ced4da;\n  border-radius: 0.25rem;\n"]);return B=function(){return e},e}var G=l.b.input(B()),J=function(e){var n=e.type,t=Object(F.a)(e,["type"]);return a.a.createElement(G,Object.assign({type:n},t))};J.defaultProps={type:"text"};var _=J;function H(){var e=Object(c.a)(["\n  position: relative;\n  flex: 0 0 70%;\n\n  @media (min-width: 400px) {\n    margin-right: 4px;\n  }\n"]);return H=function(){return e},e}function W(){var e=Object(c.a)(["\n  margin-top: 20px;\n  margin-bottom: 15px;\n  display: flex;\n  flex-wrap: wrap;\n  flex-direction: column;\n\n  @media (min-width: 400px) {\n    flex-direction: row;\n    justify-content: center;\n    align-items: flex-start;\n  }\n"]);return W=function(){return e},e}var Y=l.b.form(W()),K=l.b.div(H()),Q=function(e){var n=e.role,t=Object(r.useContext)(P),o=t.doFetch,i=t.isLoading;return a.a.createElement(Y,{role:n,onSubmit:function(e){e.preventDefault();var n=e.target.querySelector("input[name='country']").value;o(n)}},a.a.createElement(K,null,a.a.createElement(A,{srOnly:!0,labelName:"Country name:"},a.a.createElement(_,{autoComplete:"off",name:"country",list:"countries"}),a.a.createElement(N,{id:"countries",countries:E}))),a.a.createElement(D,{type:"submit",disabled:i},"Search"))};Q.defaultProps={role:""};var V=Q;function X(){var e=Object(c.a)(["\n  width: 100%;\n  height: 18px;\n  font-weight: 700;\n  color: red;\n"]);return X=function(){return e},e}var Z=l.b.p(X());function $(){var e=Object(c.a)(["\n  display: inline-block;\n  width: 2rem;\n  height: 2rem;\n  vertical-align: text-bottom;\n  border: 0.25em solid currentColor;\n  border-right-color: transparent;\n  border-radius: 50%;\n  animation: spinner-border 0.75s linear infinite;\n\n  @keyframes spinner-border {\n    to {\n      transform: rotate(360deg);\n    }\n  }\n"]);return $=function(){return e},e}var ee=l.b.div($()),ne=function(){return a.a.createElement(ee,{"aria-busy":"true",role:"progressbar"},a.a.createElement("span",{className:"sr-only"},"Loading content..."))},te=function(e){var n=e.children,t=e.isError,r=e.isLoading;return a.a.createElement(a.a.Fragment,null,a.a.createElement(Z,null,t),a.a.createElement(V,{role:"search"}),r&&a.a.createElement(ne,null),n)},re=te;function ae(){var e=Object(c.a)(["\n  margin-bottom: -1px;\n  padding: 0.75rem 1.25rem;\n  background-color: #fff;\n  border: 1px solid rgba(0, 0, 0, 0.125);\n\n  :first-child {\n    border-top-left-radius: 0.25rem;\n    border-top-right-radius: 0.25rem;\n  }\n\n  :last-child {\n    margin-bottom: 0;\n    border-bottom-right-radius: 0.25rem;\n    border-bottom-left-radius: 0.25rem;\n  }\n"]);return ae=function(){return e},e}te.defaultProps={isError:""};var oe=l.b.li(ae()),ie=function(e){var n=e.title,t=e.description;return a.a.createElement(oe,null,a.a.createElement("h2",null,n),a.a.createElement("p",null,t))};ie.defaultProps={title:"",description:""};var ce=ie;function le(){var e=Object(c.a)(["\n  padding: 0;\n  list-style: none;\n"]);return le=function(){return e},e}var ue=l.b.ul(le());function se(){var e=Object(c.a)(["\n  margin-top: 40px;\n"]);return se=function(){return e},e}var de=Object(l.b)(ue)(se()),me=function(e){var n=e.cities;return a.a.createElement(a.a.Fragment,null,n.length>0&&a.a.createElement(de,null,n.map((function(e){var n=e.pageid,t=e.title,r=e.extract;return a.a.createElement(ce,{key:n,title:t,description:r})}))))};me.defaultProps={cities:[]};var pe=me,fe=function(e){var n=e.filter((function(e,n,t){return n===t.findIndex((function(n){return n.city===e.city}))}));return n.splice(10),n},be=function(e){var n=e.map((function(e){return e.city.split("/")[0]}));return encodeURIComponent(n.join("|"))},ve=function(e){var n=e.toLowerCase(),t=E.findIndex((function(e){return e.toLowerCase()===n}));return j[t]},ge=function(){var e=function(){var e=Object(r.useState)([]),n=Object(g.a)(e,2),t=n[0],a=n[1],o=Object(r.useState)(!1),i=Object(g.a)(o,2),c=i[0],l=i[1],u=Object(r.useState)(""),s=Object(g.a)(u,2),d=s[0],m=s[1];return[{data:t,isLoading:c,isError:d},function(){var e=Object(v.a)(b.a.mark((function e(n){var t,r,o,i,c,u,s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===(t=ve(n))){e.next=26;break}return a([]),m(""),l(!0),e.prev=5,e.next=8,k(t);case 8:return r=e.sent,o=r.data.results,i=fe(o),c=be(i),e.next=14,C(c);case 14:u=e.sent,s=u.data.query.pages,l(!1),a(Object.values(s)),e.next=24;break;case 20:e.prev=20,e.t0=e.catch(5),m("Something went wrong, try again..."),l(!1);case 24:e.next=27;break;case 26:m("Wrong country provided");case 27:case"end":return e.stop()}}),e,null,[[5,20]])})));return function(n){return e.apply(this,arguments)}}()]}(),n=Object(g.a)(e,2),t=n[0],o=t.data,i=t.isLoading,c=t.isError,l=n[1];return a.a.createElement(P.Provider,{value:{doFetch:l,isLoading:i}},a.a.createElement(re,{isError:c,isLoading:i},a.a.createElement(pe,{cities:o})))},he=function(){return a.a.createElement(p,null,a.a.createElement(ge,null))};i.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(he,null)),document.getElementById("root"))}},[[27,1,2]]]);
//# sourceMappingURL=main.c7739565.chunk.js.map